<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><title>GPG Tutorial - Command Line - George Wood</title><meta name=viewport content="width=device-width,initial-scale=1"><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><link rel=stylesheet href=/css/style.min.f918cff29bf3f001445db1fa24373e03f4d9cf2367c6d72795681d6e33536959.css><meta name=description content="A comprehensive tutorial on command line GPG usage..."><meta property="og:title" content="GPG Tutorial - Command Line"><meta property="og:type" content="website"><meta property="og:url" content="https://gwood.dev/blog/2021/10/gpg-tutorial-command-line/"><meta property="og:description" content="A comprehensive tutorial on command line GPG usage..."><meta name=twitter:card content="summary"><meta name=twitter:site content="@gwo0d"><meta name=twitter:creator content="@gwo0d"><link rel=preconnect href=https://fonts.gstatic.com><link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;700&display=swap" rel=stylesheet></head><body class='page frame page-default-single'><div id=menu-main-mobile class=menu-main-mobile><ul class=menu><li class=menu-item-home><a href=https://gwood.dev/>Home</a></li><li class=menu-item-blog><a href=https://gwood.dev/blog/>Blog</a></li><li class=menu-item-contact><a href=https://gwood.dev/pages/contact/>Contact</a></li></ul></div><div id=wrapper class=wrapper><div class=header><a class=header-logo href=https://gwood.dev>George Wood</a><div class=menu-main><ul><li class=menu-item-home><a href=/>Home</a></li><li class=menu-item-blog><a href=/blog/>Blog</a></li><li class=menu-item-contact><a href=/pages/contact/>Contact</a></li></ul></div><div id=toggle-menu-main-mobile class=hamburger-trigger><button class=hamburger>Menu</button></div></div><div class=intro><h1>GPG Tutorial - Command Line<span class=dot>.</span></h1></div><div class=content><h2 id=introduction>Introduction</h2><p><em>My GPG key can be found <a href=/>here</a></em></p><p>In a world where there exists an ever-growing economy revolving around the sale and processing of individuals’ private
data, tools like <a href=https://gnupg.org>GNU Privacy Guard (GPG)</a> offer a convenient way to take back control of what was
once a well-respected right – individual privacy. I have spoken before on several occasions about why it is important to
take your privacy seriously, and to be clear, GPG is not by any means an extensive solution; it is to a smaller extent a
part of a much larger mosaic of tools needed to completely take control of your privacy.</p><p>GPG offers a set of features which allow the user to secure and/or verify data in a number of ways. I often hear the
argument <em>“surely a big, powerful entity could decrypt my data if they really want to?”</em>, and sure, there are
circumstances in which this could be true, but if used correctly, GPG offers a solid way to mathematically guarantee the
integrity and security of data i.e. no one, however powerful or well-funded has any way of accessing that data ever. I
have written a guide like this before (depreciated) which goes into more detail about why this is important and how it
works on a slightly more technical level, which you can access <a href=/blog/2020/11/data-security-a-comprehensive-guide>here</a>
if you’d like to. I will warn,
however, that it’s
aimed towards only Windows users and is outdated.</p><h2 id=how-to-install-gpg>How to install GPG</h2><p>Installing GPG will vary based on your platform, and there are often several methods of doing so. The following are
the methods I recommend using to install GPG (all of which will use a package manager).</p><h3 id=macos>macOS</h3><ol><li>Open Terminal - open Finder by holding Command <code>⌘</code> and pressing the Space Bar, then type &lsquo;Terminal&rsquo; and press
enter <code>↵</code></li><li>Install <a href=https://brew.sh>Homebrew</a> by entering the following command into Terminal (please confirm this command
matches the one on the Homebrew website - it may be outdated):<div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>/bin/bash -c <span class=s2>&#34;</span><span class=k>$(</span>curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh<span class=k>)</span><span class=s2>&#34;</span>
</span></span></code></pre></div></li><li>Once Homebrew is installed, run the following command in Terminal:<div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>brew install gnupg
</span></span></code></pre></div></li></ol><p>GPG should now be installed on your Mac.</p><h3 id=windows>Windows</h3><ol><li><p>Open PowerShell (admin) - in Windows Search, type PowerShell. Locate PowerShell within the results, right click,
and click &ldquo;Run as Administrator&rdquo;. Approve the User Account Control prompt when it shows.</p></li><li><p>Install <a href=https://chocolatey.org>Chocolatey</a> by entering the following command into PowerShell (please confirm this command
matches the one on the Chocolatey website - it may be outdated):</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>Set-ExecutionPolicy Bypass -Scope Process -Force<span class=p>;</span> <span class=o>[</span>System.Net.ServicePointManager<span class=o>]</span>::SecurityProtocol <span class=o>=</span> <span class=o>[</span>System.Net.ServicePointManager<span class=o>]</span>::SecurityProtocol -bor 3072<span class=p>;</span> iex <span class=o>((</span>New-Object System.Net.WebClient<span class=o>)</span>.DownloadString<span class=o>(</span><span class=s1>&#39;https://community.chocolatey.org/install.ps1&#39;</span><span class=o>))</span>
</span></span></code></pre></div></li><li><p>Once Chocolatey is installed, run the following command in PowerShell:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>choco install gnupg
</span></span></code></pre></div></li></ol><p>GPG should now be installed on your Windows PC.</p><h3 id=linux>Linux</h3><ol><li>If you use Linux and don&rsquo;t already know how to use GPG, stop using Linux immediately - you simply aren&rsquo;t worthy!</li></ol><h2 id=how-to-generate-a-gpg-keypair>How to generate a GPG keypair</h2><p>In order to use GPG, you need to generate a keypair, that is a public key and a private key. Your public key will be
responsible for encrypting data, and is (as the name suggests) available to the public. Your private key, however,
is the key used to decrypt and sign data; it is therefore vitally important that you keep your private key
very safe, and equally secure to prevent others seeing your data or pretending to be you.</p><ul><li>To generate your keypair, run the following command in your relevant command line, either Terminal (macOS) or
PowerShell (Windows).<div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>gpg --full-generate-key
</span></span></code></pre></div>You will then be taken through a step-by-step setup guide, and should proceed as follows:<ul><li>Type <code>1</code> and press enter <code>↵</code> - this will select option 1 for the key type (RSA and RSA).</li><li>Type <code>4096</code> and press enter <code>↵</code> - this defines the length of your keys (4096 bits). Basically the longer your
keys are the more secure your encryption is.</li><li>Type <code>0</code> and press enter <code>↵</code> - this specifies the expiry for your key, and in this case we can make it never
expire. If you have a good reason to have an expiring key, change this accordingly.<ul><li>Type <code>y</code> and press enter <code>↵</code> to confirm this.</li></ul></li><li>Enter your details correctly - it won&rsquo;t be possible to change these after your keys have been generated.</li><li>Optionally: leave a comment to attach to your key. You can just press enter <code>↵</code> to skip if you don&rsquo;t want a
comment.</li><li>You will now be shown a summary of the details you&rsquo;ve entered. Check these thoroughly, as this is your last
opportunity to change them. If you are satisfied, type <code>O</code> and press enter <code>↵</code> to confirm and generate your
keypair.</li><li>Finally, enter a nice secure password at the prompt. This is your last line of defence if your key is stolen so
for &lt;insert preferred deity>&rsquo;s sake make your password strong.</li></ul></li></ul><p>And that&rsquo;s it! You&rsquo;re now the proud owner of a shiny new GPG keypair. Now you need to send your key
to a keyserver, or more specifically many keyservers. This allows anyone to look up your GPG key and encrypt things
for you, as well as to verify your signatures. You can do this as follows&mldr;</p><ul><li>Run the following command:<div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>gpg --list-keys
</span></span></code></pre></div>This will provide a list of your stored keys (including yours)</li><li>Find the key with your email address beneath it. If you&rsquo;re new to GPG, this will probably be the only one there.</li><li>At the top of your key&rsquo;s entry, there will be a section prefixed with <code>pub</code>, the line underneath this consisting
of seemingly random letters and numbers is what we&rsquo;re looking for - that&rsquo;s your key&rsquo;s signature. Copy this and
keep it safe.</li><li>Now run the following command:<div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>gpg --send-keys &lt;your key<span class=err>&#39;</span>s signature&gt;
</span></span></code></pre></div></li></ul><p>Your key has now been sent to a pool of keyservers around the world. Yay!</p><p>The last thing you should do is generate a revocation certificate, just in case your key goes missing. A revocation
certificate is
basically a kill-switch for your keypair. If it&rsquo;s published to a keyserver, it tells everyone to stop using your key,
so you can make a new one.</p><ul><li>To do this, run the following command:<div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>gpg --gen-revoke &lt;your key<span class=err>&#39;</span>s signature&gt;
</span></span></code></pre></div></li><li>You will be asked for a save location, so make sure you choose somewhere you&rsquo;ll remember.</li></ul><p>Now this is very important&mldr; <strong>KEEP THIS CERTIFICATE SAFE!</strong> If you lose it, or it gets into the wrong hands, it
can cause you a whole lot of problems; it&rsquo;s far easier to just look after the thing.</p><h2 id=how-to-use-gpg>How to use GPG</h2><p>Now you&rsquo;ve got your keypair, you&rsquo;re ready to start using it. GPG has a number of useful functions, but today I am only
going to cover the two most commonly used ones - sign, and encrypt.</p><ul><li>Signing data is a way of mathematically proving a piece of data came from you, and hasn&rsquo;t been changed since you
signed it.</li><li>Encrypting data is a way of mathematically securing data, so that only the intended recipient can read it.</li></ul><p>Often data will be both signed and encrypted, in order to guarantee both its integrity, origin, and security.</p><h3 id=how-to-import-someone-elses-key>How to import someone else&rsquo;s key</h3><p>If someone has sent you a file with a signature or an encrypted file, it is important to be able to verify/decrypt it.
The first thing you&rsquo;ll need to do is import the key of whoever sent you the file.</p><ul><li>To do this, first get hold of the person&rsquo;s key (ideally from their website or other trusted source) and download
it to your device.</li><li>Then navigate to the directory you&rsquo;ve downloaded their key to, and run the following command:<div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>gpg --import &lt;their key<span class=err>&#39;</span>s filename&gt;
</span></span></code></pre></div></li><li>If you are 100% confident of the key&rsquo;s origin i.e. are sure it&rsquo;s legitimate, you should finish with this command:</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>gpg --sign-key &lt;their key<span class=err>&#39;</span>s signature&gt;
</span></span></code></pre></div><h3 id=how-to-sign-data>How to sign data</h3><p>To sign a file, you first need to navigate to whichever directory said file is stored in on your device. I won&rsquo;t
outline here how to do that, but numerous guides online will help with this (it&rsquo;s very easy).</p><ul><li>Once in your desired file&rsquo;s directory, run the following command:<div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>gpg --sign &lt;your file<span class=err>&#39;</span>s name <span class=o>(</span>including extension e.g. .txt<span class=o>)</span>&gt;
</span></span></code></pre></div><ul><li>You will be asked for your key&rsquo;s password, and should enter it when prompted.</li></ul></li><li>When completed, you should have a signature file in the same directory as your target file, in a form like:<ul><li>&lt;filename>.sig</li><li>&lt;filename>.gpg</li></ul></li></ul><p>When you distribute files with a signature, be sure to include both the file itself and the .gpg/.sig signature file.</p><h3 id=how-to-encrypt-data>How to encrypt data</h3><p>To encrypt a file, the process is remarkably similar to signing. As before, begin by navigating to the file&rsquo;s
directory.</p><ul><li>Once in your desired file&rsquo;s directory, run the following command:<div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>gpg --encrypt &lt;your file<span class=err>&#39;</span>s name <span class=o>(</span>including extension e.g. .txt<span class=o>)</span>&gt;
</span></span></code></pre></div></li><li>You will be asked to enter a list of recipients. If you would like to be able to decrypt the file yourself, it is
important that you include yourself on this list. You may enter their key&rsquo;s signature, their email address, or
their name.</li><li>You will be asked for your key&rsquo;s password, and should enter it when prompted.</li><li>When completed, your encrypted file should be in the same directory with the filename &lt;filename>.gpg</li><li>If desired, where security is paramount, it may also be a good idea to delete the original at this point.</li></ul><h3 id=how-to-verify-a-signature>How to verify a signature</h3><p>With the sender&rsquo;s key imported <a href=/blog/2021/10/gpg-tutorial-command-line/#how-to-import-someone-elses-key>(as above)</a>,
run the following command in the signature file&rsquo;s directory. It is important to have both the signature file and the
file itself together for this:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>gpg --verify &lt;signature<span class=err>&#39;</span>s filename&gt;
</span></span></code></pre></div><p>The level of trust in this signature should now be shown.</p><h3 id=how-to-decrypt-a-file>How to decrypt a file</h3><p>Decrypting a file is probably the easiest GPG operation. Simply navigate in the terminal to the directory where the
encrypted file is and run the following command:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>gpg --decrypt &lt;filename&gt;
</span></span></code></pre></div><p>That&rsquo;s it! I said it&rsquo;d be easy.</p><hr><p>A signature for this message can be found <a href=/blog/files/2021/10/gpg-tutorial-command-line.md.asc>here</a></p></div><div class=footer><div class=footer-social><span class="social-icon social-icon-twitter"><a href=https://twitter.com/gwo0d title=twitter target=_blank rel=noopener><img src=/images/social/twitter.svg width=24 height=24 alt=twitter></a></span>
<span class="social-icon social-icon-github"><a href=https://github.com/gwo0d title=github target=_blank rel=noopener><img src=/images/social/github.svg width=24 height=24 alt=github></a></span>
<span class="social-icon social-icon-linkedin"><a href=https://www.linkedin.com/in/gwo0d title=linkedin target=_blank rel=noopener><img src=/images/social/linkedin.svg width=24 height=24 alt=linkedin></a></span></div></div></div><script type=text/javascript src=/js/bundle.min.5993fcb11c07dea925a3fbd58c03c7f1857197c35fccce3aa963a12c0b3c9960.js></script></body></html>